#! env bash

# Select either rofi or dmenu or print error.
if [[ $(which rofi) == "rofi not found" ]] ; then
	if [[ $(which dmenu) == "dmenu not found" ]]; then
		echo "No prompt tool installed, install either rofi or dmenu.";
		exit 1;
	else
		CMD="dmenu -p";
	fi
else
	CMD="rofi -dmenu -sep \n -p";
fi

PREV_URLS=$(cat $HOME/.local/share/env/browse | uniq)

URL=$(echo $PREV_URLS | $CMD "Open URL: http://")
if [ -n "$URL" ]; then
	echo -e "${URL}\n${PREV_URLS}" > $HOME/.local/share/env/browse
	xdg-open "http://${URL}" 2> /dev/null
fi
