#! env bash

# TODO: Write this script in some other language than bash.

# Select either rofi or dmenu or print error.
if [[ $(which rofi) == "rofi not found" ]] ; then
	if [[ $(which dmenu) == "dmenu not found" ]]; then
		echo "No prompt tool installed, install either rofi or dmenu.";
		exit 1;
	else
		CMD="dmenu -p";
	fi
else
	CMD='rofi -dmenu -p';
fi

BROWSE_FILE=$HOME/.local/share/env/browse
touch $BROWSE_FILE
PREV_URLS=$(cat $BROWSE_FILE)

URL=$(echo "$PREV_URLS" | $CMD "Open URL: http://")
if [ -n "$URL" ]; then
	echo -e "${URL}\n${PREV_URLS}" | sort | uniq > $BROWSE_FILE
	xdg-open "http://${URL}" 2> /dev/null
fi
